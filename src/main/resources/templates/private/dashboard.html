<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="_csrf" th:content="${_csrf.token}" />
  <meta name="_csrf_header" th:content="${_csrf.headerName}" />
  <title>Ricerca Lavoro - Tirocini</title>
  <link rel="stylesheet" th:href="@{/css/style.css}" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
</head>

<body>
  <div class="app-container">
    <header class="header">
        <h1><img src="/image/logo2.png" alt="" height="100px" /><span>Dashboard</span>
        </h1>

        <div class="header-nav-links">
            <a th:href="@{/profilo}" class="nav-switch-button"><i class="fas fa-table-columns"></i> Vai al profilo</a>

            <a th:href="@{/login?logout}" class="nav-switch-button logout">
                <i class="fas fa-sign-out-alt"></i> Logout
            </a>
        </div>
    </header>
    
    

    <main class="content-area">
      <section class="job-list" id="job-list">
        <article class="job-card" th:each="job : ${tirocini}" th:data-job-id="${job.id_tirocinio}"
          onclick="loadJobDetails(this)">
          <div class="company-logo bg-blue large" th:text="${job.nomeAzienda.substring(0, 1).toUpperCase()}">
            B
          </div>

          <div class="job-info">
            <span class="salary" th:text="${job.durata}">Durata</span>
            <h3 th:text="${job.mansione}">Titolo Mansione</h3>
            <p class="company-name" th:text="${job.nomeAzienda}">
              Nome Azienda
            </p>
            <p class="job-description" th:text="${job.descrizione}">
              Descrizione Breve
            </p>

            <section class="tags-row">
              <div th:each="competenza : ${job.competenze}">
                <span class="location-tag" th:text="${competenza.nome}">UX Designer</span>
              </div>
            </section>
          </div>
        </article>
      </section>
    </main>

    <div id="jobDetailsOverlay" class="overlay-modal">
      <aside class="job-details-panel">
        <button class="close-btn" onclick="closeJobDetailsOverlay()">
          <i class="material-icons">close</i>
        </button>

        <div class="company-header">
          <div id="aside-logo" class="company-logo bg-blue large"></div>
          <h2 id="aside-mansione">Seleziona un Tirocinio</h2>
          <p id="aside-azienda"></p>
          <div class="detail-tabs">
            <button class="tab active">Tirocinio</button>
          </div>
        </div>

        <div class="details-content" id="aside-descrizione">
          <p>
            Seleziona un tirocinio dalla lista per visualizzare i dettagli
            completi e le opzioni di candidatura.
          </p>
          <section class="tags-row" id="aside-competenze"></section>
        </div>

        <div class="apply-actions">
          <!--
            <button class="favorite-btn" id="aside-favorite-btn">
              <i class="material-icons">favorite_border</i>
            </button>
            -->
          <button class="apply-btn" id="aside-apply-btn">Candidati</button>
        </div>
      </aside>
    </div>
  </div>

  <script th:src="@{/js/dashboard.js}"></script>
</body>

</html>